<!DOCTYPE html>
<html>
<head>
    <title>Smart Street Light Dashboard</title>
    <meta http-equiv="refresh" content="5">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial; background: #f4f6f9; margin: 0; padding: 20px; }
        h1 { text-align: center; color: #333; }
        .container { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 30px; }
        .card { background: white; padding: 20px; border-radius: 10px; box-shadow: 0px 2px 8px rgba(0,0,0,0.1); text-align: center; }
        .status-on { color: green; font-weight: bold; }
        .status-off { color: red; font-weight: bold; }
        .fault { color: red; font-weight: bold; }
        canvas { background: white; padding: 15px; border-radius: 10px; box-shadow: 0px 2px 8px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
<h1>Smart Street Light Monitoring System</h1>
<div class="container">
    <div class="card"><h3>Status</h3>{% if status == "ON" %}<p class="status-on">{{ status }}</p>{% else %}<p class="status-off">{{ status }}</p>{% endif %}</div>
    <div class="card"><h3>Traffic Count</h3><p>{{ traffic }}</p></div>
    <div class="card"><h3>Brightness</h3><p>{{ brightness }}%</p></div>
    <div class="card"><h3>Current Energy</h3><p>{{ energy }} W</p></div>
    <div class="card"><h3>Total Energy Used</h3><p>{{ total_energy }} W</p></div>
    <div class="card"><h3>Total Faults</h3><p class="fault">{{ faults }}</p></div>
</div>
<h2>Energy Usage Trend</h2>
<canvas id="energyChart"></canvas>
<script>
    const energyData = {{ energy_list|safe }};
    const labels = energyData.map((_, index) => index + 1);
    const ctx = document.getElementById('energyChart').getContext('2d');
    const energyChart = new Chart(ctx, {
        type: 'line',
        data: { labels: labels, datasets: [{ label: 'Energy Consumption', data: energyData, borderWidth: 2, fill: false }] },
        options: { responsive: true }
    });
</script>
</body>
</html>
